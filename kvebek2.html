<html>
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <!-- we import arjs version without NFT but with marker + location based support -->
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
<body>
    <a-assets>
        <img id="rev" src="image/22_1.jpg">
        <img id="ww2" src="image/29_1.jpg">
        <img id="krch" src="image/30_1.jpg">
    </a-assets>

    <a-scene embedded arjs> 
    <a-marker preset="hiro">

        <!-- Title Plane -->
        <a-text 
            value="Choose a Poster of the «Thaw»" 
            align="center" 
            position="0 0 -0.6" 
            rotation="0 180 0" 
            color="black"
            scale="0.8 0.8 0.8">
        </a-text>

        <!-- First Image Plane (KRCH) -->
        <a-plane 
            id="krch-image"
            position="0.6 0 0" 
            rotation="0 90 0" 
            width="1.5" 
            height="2" 
            scale="0.5 0.5 0.5"
            color="white" 
            src="#krch">
        </a-plane>


        <!-- Kvebek Button (Green) -->
        <a-entity 
            id="kvebek-button" 
            position="0.6 0.6 0" 
            rotation="90 0 0" 
            button-handler>
            <a-box 
                color="#00FF00" 
                depth="0.2" 
                height="0.4" 
                width="0.4">
            </a-box>
        </a-entity>


        <!-- Second Image Plane (WW2) -->
        <a-plane 
            id="ww2-image"
            position="-0.6 0 0" 
            rotation="0 -90 0" 
            width="1.5" 
            height="2" 
            color="white" 
            scale="0.5 0.5 0.5"
            src="#ww2">
        </a-plane>

        <!-- First Restart Button (Blue) -->
        <a-entity 
            id="restart-button-1" 
            position="-0.6 0.6 0" 
            rotation="90 0 0" 
            button-handler>
            <a-box 
                color="#4CC3D9" 
                depth="0.2" 
                height="0.4" 
                width="0.4">
            </a-box>
        </a-entity>


        <!-- Third Image Plane (Revolution) -->
        <a-plane 
            id="rev-image"
            position="0 0 0.6"
            rotation="0 0 0" 
            width="1.5" 
            height="2" 
            scale="0.5 0.5 0.5"
            color="white" 
            src="#rev"
            data-image="true">
        </a-plane>

        <!-- No Result Button (Red) -->
        <a-entity 
            id="no-result-button" 
            position="-0.6 0.6 0" 
            rotation="90 0 0" 
            button-handler>
            <a-box 
                color="#FF0000" 
                depth="0.2" 
                height="0.4" 
                width="0.4">
            </a-box>
        </a-entity>

        <!-- Second Restart Button (Purple) -->
        <a-entity 
            id="restart-button-2" 
            position="0 0.6 -0.6" 
            rotation="90 0 0" 
            button-handler>
            <a-box 
                color="#800080" 
                depth="0.2" 
                height="0.4" 
                width="0.4">
            </a-box>
        </a-entity>

    </a-marker>
    <a-entity camera></a-entity>
</a-scene>

        <!-- Updated Camera with Specified Attributes -->
        <a-entity camera look-controls wasd-controls="acceleration: 25" position="0 1.3 1">
            <a-entity id="mouseCursor" cursor="rayOrigin: mouse"></a-entity>
        </a-entity>

        <script>
            // Get references to the image planes and hidden button
            const krchImage = document.querySelector('#krch-image');
            const ww2Image = document.querySelector('#ww2-image');
            const revImage = document.querySelector('#rev-image');
            const krchHiddenButton = document.querySelector('#krch-move-button');
            const mainCamera = document.querySelector('a-entity[camera]');

            // Function to handle image click (up and down)
            function handleImageClick(image) {
                const currentPosition = image.getAttribute('position');
                
                if (currentPosition.y <= 1.5) {
                    // Move up
                    image.emit('click-up');
                    
                    // Show hidden button only for krch image
                    if (image.id === 'krch-image') {
                        document.querySelector('#krch-hidden-button').setAttribute('visible', true);
                    }
                } else {
                    // Move down
                    image.emit('click-down');
                    
                    // Hide hidden button
                    document.querySelector('#krch-hidden-button').setAttribute('visible', false);
                }
            }

            // Add click event listeners to images
            krchImage.addEventListener('click', () => handleImageClick(krchImage));
            ww2Image.addEventListener('click', () => handleImageClick(ww2Image));
            revImage.addEventListener('click', () => handleImageClick(revImage));

            // Add click event listener to hidden button
            krchHiddenButton.addEventListener('click', () => {
                // Rotate camera 180 degrees
                const currentRotation = mainCamera.getAttribute('rotation');
                mainCamera.setAttribute('rotation', {
                    x: currentRotation.x, 
                    y: currentRotation.y + 180, 
                    z: currentRotation.z
                });
            });
        </script>

</body>
</html>
